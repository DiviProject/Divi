<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIVX Project: CDBEnv Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIVX Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_c_d_b_env-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CDBEnv Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a6fbf26da5d7f8f64a77a3ba15e4df244"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_d_b_env.html#a6fbf26da5d7f8f64a77a3ba15e4df244">VerifyResult</a> { <b>VERIFY_OK</b>, 
<b>RECOVER_OK</b>, 
<b>RECOVER_FAIL</b>
 }</td></tr>
<tr class="separator:a6fbf26da5d7f8f64a77a3ba15e4df244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53fd285f09c312973caa6f90b33937f5"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; std::vector&lt; unsigned char &gt;, std::vector&lt; unsigned char &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_d_b_env.html#a53fd285f09c312973caa6f90b33937f5">KeyValPair</a></td></tr>
<tr class="separator:a53fd285f09c312973caa6f90b33937f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab352b9f28a8329037fd942f9912797e3"><td class="memItemLeft" align="right" valign="top"><a id="ab352b9f28a8329037fd942f9912797e3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MakeMock</b> ()</td></tr>
<tr class="separator:ab352b9f28a8329037fd942f9912797e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44129114301a41635c3707c6bc92ab1"><td class="memItemLeft" align="right" valign="top"><a id="ae44129114301a41635c3707c6bc92ab1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>IsMock</b> ()</td></tr>
<tr class="separator:ae44129114301a41635c3707c6bc92ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d04604da4ad6f063e150b34d5df392d"><td class="memItemLeft" align="right" valign="top"><a id="a9d04604da4ad6f063e150b34d5df392d"></a>
<a class="el" href="class_c_d_b_env.html#a6fbf26da5d7f8f64a77a3ba15e4df244">VerifyResult</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Verify</b> (std::string strFile, bool(*recoverFunc)(<a class="el" href="class_c_d_b_env.html">CDBEnv</a> &amp;dbenv, std::string strFile))</td></tr>
<tr class="separator:a9d04604da4ad6f063e150b34d5df392d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08726637bff0809ab9c7c493383a3914"><td class="memItemLeft" align="right" valign="top"><a id="a08726637bff0809ab9c7c493383a3914"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>Salvage</b> (std::string strFile, bool fAggressive, std::vector&lt; <a class="el" href="class_c_d_b_env.html#a53fd285f09c312973caa6f90b33937f5">KeyValPair</a> &gt; &amp;vResult)</td></tr>
<tr class="separator:a08726637bff0809ab9c7c493383a3914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaef61cd032e25144c06e405fb7f93cf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_d_b_env.html#aaaef61cd032e25144c06e405fb7f93cf">Open</a> (const boost::filesystem::path &amp;path)</td></tr>
<tr class="separator:aaaef61cd032e25144c06e405fb7f93cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf3b64c05bf0d7f0a7dbaa9a072c0bc"><td class="memItemLeft" align="right" valign="top"><a id="a0bf3b64c05bf0d7f0a7dbaa9a072c0bc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Close</b> ()</td></tr>
<tr class="separator:a0bf3b64c05bf0d7f0a7dbaa9a072c0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c5850b88919553a8db416ce288ff1a"><td class="memItemLeft" align="right" valign="top"><a id="a09c5850b88919553a8db416ce288ff1a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Flush</b> (bool fShutdown)</td></tr>
<tr class="separator:a09c5850b88919553a8db416ce288ff1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e0fe52dfc0da22fe9bf59eeda57fba"><td class="memItemLeft" align="right" valign="top"><a id="aa4e0fe52dfc0da22fe9bf59eeda57fba"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>CheckpointLSN</b> (const std::string &amp;strFile)</td></tr>
<tr class="separator:aa4e0fe52dfc0da22fe9bf59eeda57fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53fd53afdd1e0881b8ffbb11a89b556"><td class="memItemLeft" align="right" valign="top"><a id="ac53fd53afdd1e0881b8ffbb11a89b556"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>CloseDb</b> (const std::string &amp;strFile)</td></tr>
<tr class="separator:ac53fd53afdd1e0881b8ffbb11a89b556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a53f94daf3096e047d7b041e6a885d6"><td class="memItemLeft" align="right" valign="top"><a id="a1a53f94daf3096e047d7b041e6a885d6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>RemoveDb</b> (const std::string &amp;strFile)</td></tr>
<tr class="separator:a1a53f94daf3096e047d7b041e6a885d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f1daab338b2098ea693efad6edefb9b"><td class="memItemLeft" align="right" valign="top"><a id="a5f1daab338b2098ea693efad6edefb9b"></a>
DbTxn *&#160;</td><td class="memItemRight" valign="bottom"><b>TxnBegin</b> (int flags=DB_TXN_WRITE_NOSYNC)</td></tr>
<tr class="separator:a5f1daab338b2098ea693efad6edefb9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af71bf28f9142c38aedc550353270b2b7"><td class="memItemLeft" align="right" valign="top"><a id="af71bf28f9142c38aedc550353270b2b7"></a>
<a class="el" href="class_annotated_mixin.html">CCriticalSection</a>&#160;</td><td class="memItemRight" valign="bottom"><b>cs_db</b></td></tr>
<tr class="separator:af71bf28f9142c38aedc550353270b2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a70690e7f688f5e92a972e7fa18668"><td class="memItemLeft" align="right" valign="top"><a id="a50a70690e7f688f5e92a972e7fa18668"></a>
DbEnv&#160;</td><td class="memItemRight" valign="bottom"><b>dbenv</b></td></tr>
<tr class="separator:a50a70690e7f688f5e92a972e7fa18668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b8a3caf48395ef3f05e3717b33bf32c"><td class="memItemLeft" align="right" valign="top"><a id="a3b8a3caf48395ef3f05e3717b33bf32c"></a>
std::map&lt; std::string, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mapFileUseCount</b></td></tr>
<tr class="separator:a3b8a3caf48395ef3f05e3717b33bf32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89184b6635285b963fa4d80fc292b386"><td class="memItemLeft" align="right" valign="top"><a id="a89184b6635285b963fa4d80fc292b386"></a>
std::map&lt; std::string, Db * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mapDb</b></td></tr>
<tr class="separator:a89184b6635285b963fa4d80fc292b386"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a53fd285f09c312973caa6f90b33937f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53fd285f09c312973caa6f90b33937f5">&#9670;&nbsp;</a></span>KeyValPair</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;std::vector&lt;unsigned char&gt;, std::vector&lt;unsigned char&gt; &gt; <a class="el" href="class_c_d_b_env.html#a53fd285f09c312973caa6f90b33937f5">CDBEnv::KeyValPair</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Salvage data from a file that Verify says is bad. fAggressive sets the DB_AGGRESSIVE flag (see berkeley DB-&gt;verify() method documentation). Appends binary key/value pairs to vResult, returns true if successful. NOTE: reads the entire database into memory, so cannot be used for huge databases. </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a6fbf26da5d7f8f64a77a3ba15e4df244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fbf26da5d7f8f64a77a3ba15e4df244">&#9670;&nbsp;</a></span>VerifyResult</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_c_d_b_env.html#a6fbf26da5d7f8f64a77a3ba15e4df244">CDBEnv::VerifyResult</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Verify that database file strFile is OK. If it is not, call the callback to try to recover. This must be called BEFORE strFile is opened. Returns true if strFile is OK. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aaaef61cd032e25144c06e405fb7f93cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaef61cd032e25144c06e405fb7f93cf">&#9670;&nbsp;</a></span>Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CDBEnv::Open </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>debug </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>PIVX/src/<a class="el" href="db_8h_source.html">db.h</a></li>
<li>PIVX/src/db.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
